![[2023-07-07_22-30.png]]

# Memory

### Cache
- Located in the CPU
	- 3 Levels from smallest(kb)/fastest to largest(mb)/slowest

#### RAM

- Accessing data from RAM addresses takes many more instructions.
	- For example, retrieving an instruction from the registers takes only one clock cycle, and retrieving it from the L1 cache takes a few cycles, while retrieving it from RAM takes around 200 cycles.

- 32-bit addressing limited max RAM size to ~4GB.
- 64-bit max size is 18.5 million TB

- When a program is run all of its data and instructions are copied from storage to RAM for speed.
	- When it's closed the data is removed or the RAM is made available.

![[2023-07-07_22-35.png]]
#### 4 Main RAM Segments
![[2023-07-07_22-35_1.png]]

- Each application is allocated its own Virtual Memory when run.

### Speed
![[2023-07-07_22-39.png]]

___

# CPU

- CPU contains
	- Control Unit (CU)
	- Arithmetic/Logic Unit (ALU)

![[2023-07-07_22-41.png]]

An instruction cycle consists of four stages: `Fetch`, `Decode`, `Execute`, and `Store`:
![[2023-07-07_22-42.png]]

>All of the stages in the instruction cycle are carried out by the Control Unit, except when arithmetic instructions need to be executed "add, sub, ..etc", which are executed by the ALU.

Each Instruction Cycle takes multiple clock cycles to finish, depending on the CPU architecture and the complexity of the instruction
![[2023-07-07_22-44.png]]

- To execute `add rax, 1` :
	- Fetch instruction from `rip` register, `48 83 C0 01`
	- Decode to know that it needs to perform add 1 to the value at rax
	- Get the current value at `rax` (by CU) and add 1 to it (by ALU).
	- Store the new value back in `rax`


## Processor Specific

- Each processor type has its own assembly language known as **Instruction Set Architecture (ISA)**
- `add rax, 1` on x86 is written for ARM as `add r1, r1, 1`

There are also "flavors" of individual ISAs. Intel syntax vs AT&T syntax
___

# Instruction Set Architectures
![[2023-07-07_22-52.png]]
- The two main ISAs that are widely used are:
	- **Complex Instruction Set Computer (CISC)** - used in Intel/AMD processors used in most PCs and servers
	- **Reduced Instruction Set Computer (RISC)** - used in ARM/Apple processors used in most smartphones and some laptops.

#### CISC
- Favors more complex instructions to reduce the number of overall instructions.
- Even though it takes a single instruction cycle to execute an instruction, since they are more complex, they take more clock cycles. This leads to increased heat and power consumption.

#### RISC
- Favors splitting instructions into minor ones. The CPU is designed only to handle simple instructions.
- Splitting all instrucions into minor ones makes all instructions the same length.
	- Executing each instruction in a single clock cycle and only executing simple instructions leads to RISC processors being very power efficient.
![[2023-07-07_23-00.png]]