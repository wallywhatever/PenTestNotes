
# SSH
- Port 22
- Direct encrypted connection betwen hosts
- Can be configured to only allow specific clients
- OpenSSH has six [authentication](https://www.golinuxcloud.com/openssh-authentication-methods-sshd-config/) methods:
	1. Password auth
	2. Public-key auth
	3. Host-based auth
	4. Keyboard auth
	5. Challenge-response auth
	6. GSSAPI auth

#### Default Configuration
![[2023-03-20 17_56_52-Footprinting.png|700]]

#### Dangerous Settings
![[2023-03-20 17_57_26-Footprinting.png|700]]
- [Hardening guide](https://www.ssh-audit.com/hardening_guides.html)

#### Footprinting SSH
- [ssh-audit](https://github.com/jtesta/ssh-audit)
	- `./ssh-audit.py <IP>`
	- Shows general information like version and which encryption algos are allowed.
- **Change Authentication Method**
	- `ssh -v user@<IP> -o PreferredAuthentications=password`
___

# Rsync
- Used for copying files locally and remotely.
- Uses delta-transfer algo which only transfers what's different between files which makes it good for backups.
- [Rsync abuse guide](https://book.hacktricks.xyz/network-services-pentesting/873-pentesting-rsync)
- Can be used with SSH. [Syntax guide](https://phoenixnap.com/kb/how-to-rsync-over-ssh).
- Uses port 873

#### Scanning for Rsync
	sudo nmap -sV -p 873 <IP>

#### Probing for Accessible Shares
- `nc -nv <IP> 873`
- `#list`

#### Enumerating an Open Share
- `rsync -av --list-only rsync:://<ip>/<share>`

#### Syncing (downloading) A Share
- `rsync -av rsync:://<ip>/<share>`
	- If using SSH add `-e ssh` or `-e "ssh -p2222"` if a nonstandard SSH port is in ue.

___
# R-Services
- Suite aof services hosted to enable remote access or issue commands between Unix hosts over TCP/IP.
- Was the defacto stand for remote access until SSH.
- Unencrypted
- Ports 512, 513, 514

- R-commands suite consists of the following programs:
	- **rcp** - remote copy 
	- **rexec** - remote execution
	- **rlogin** - remote login
	- **rsh** - remote shell
	- **rstat**
	- **ruptime**
	- **rwho** - remote who

![[2023-03-20 18_48_57-Footprinting.png|750]]

- `/etc/hosts.equiv` contains a list of trusted hosts. When users on one of these hosts attempt to access the system, access is automatically granted.
	- hosts.equiv is the config for all users on a system
	- .rhosts provides a per user configuration.

![[2023-03-20 18_50_39-Footprinting.png]]

#### Scanning for R-Services

**Nmap**
	- `sudo nmap -sV -p 512,513,514 <IP>`

#### Logging In Using Rlogin
	`rlogin <IP> -l user`

#### Listing Authenticated Users With Rwho
	`rwho`

#### Listing Authenticated Users Using Rusers
	`rusers -al <IP>`