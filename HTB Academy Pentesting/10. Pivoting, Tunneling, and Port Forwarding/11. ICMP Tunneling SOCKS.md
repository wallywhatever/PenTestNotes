- ICMP tunneling encapsulates traffic in ICMP packets containing echo requests and responses
	- Only works when ping responses are allowed within a firewalled network.
- We will use the [ptunnel-ng](https://github.com/utoni/ptunnel-ng) tool to create a tunnel between our Ubuntu server and our attack host.
	- We will be able to proxy our traffic through the ptunnel-ng client. We can start the ptunnel-ng server on the target pivot host.

## Set Up and Use ptunnel-ng

#### Clone & Build Ptunnel-ng
``` bash
git clone https://github.com/utoni/ptunnel-ng.git && cd ptunnel-ng
sudo ./autogen.sh
```

#### Transfer Ptunnel-ng to Pivot Host
``` bash
scp -r ptunnel-ng ubuntu@10.129.202.64:~/
```

#### Start ptunnel-ng Server on the Pivot Host
``` bash
sudo ./ptunnel-ng -r10.129.202.64 -R22
```
- The IP address following `-r` is the IP want ptunnel to accept connections on. 

#### Connect to ptunnel-ng Server from Attack Host
``` bash
sudo ./ptunnel-ng -p10.129.202.64 -l2222 -r10.129.202.64 -R22
```
- `-p/-r <ipAddressofPivot>`
- `-l2222` - port 2222
- `-R` remote listening port

#### Tunnel an SSH Connection through an ICMP Tunnel
``` bash
ssh -p2222 -lubuntu 127.0.0.1
```

#### Enable Dynamic Port Forwarding over SSH
``` bash
ssh -D 9050 -p2222 -lubuntu 127.0.0.1
```

#### Proxychain through ICMP Tunnel
``` bash
proxychains nmap -sV -sT 172.16.5.19 -p3389
```